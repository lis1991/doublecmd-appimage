app: DoubleCommander
exec: doublecmd
icon: doublecmd
name: DoubleCommander
categories: Utility;FileTools;
terminal: false

ingredients:
  script: >
    set -e && \
    echo "üîç –ò—â–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é Double Commander –Ω–∞ SourceForge..." && \
    JSON_URL="https://sourceforge.net/projects/doublecmd/files/doublecmd-qt6/?&sort=date&dir=desc" && \
    TEMP_HTML=$(curl -s "$JSON_URL") && \
    LATEST_LINK=$(echo "$TEMP_HTML" | grep -o 'href="[^"]*doublecmd-qt6_[0-9.]*-1_amd64\.deb"' | head -1 | sed 's/href="//;s/"$//') && \
    if [ -z "$LATEST_LINK" ]; then \
      echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Å—Å—ã–ª–∫—É –Ω–∞ .deb —Ñ–∞–π–ª"; \
      echo "üìÑ –û—Ç–≤–µ—Ç –æ—Ç SourceForge:"; \
      echo "$TEMP_HTML" | head -10; \
      exit 1; \
    fi && \
    DEB_URL="https://downloads.sourceforge.net$LATEST_LINK" && \
    echo "üì• –°–∫–∞—á–∏–≤–∞–µ–º: $DEB_URL" && \
    wget "$DEB_URL" -O doublecmd.deb && \
    ar x doublecmd.deb && \
    tar -xf data.tar.xz && \
    rm -f doublecmd.deb control.tar.* data.tar.* debian-binary

  exclude:
    - usr/share/doc
    - usr/share/man

  desktop: usr/share/applications/doublecmd.desktop
  icon: usr/share/icons/hicolor/256x256/apps/doublecmd.png

AppDir:
  path: ./
